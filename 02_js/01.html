<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--
        ### Q1) 화면(임의의 크기의 사각형 영역)안에 임의의 이미지가 비율을 유지한채 최대의 크기로 이미지가 보여질 수 있는 이미지의 크기를 구하시오. (주용)
        [주어진 변수]
        임의의 화면 - screenWidth, screenHeight
        임의의 이미지 - imageWidth, imageHeight
    -->
    <style>
        body,
        div {
            margin: 0;
            padding: 0;
        }
        .image{
            display: block;
            margin: auto;
        }
    </style>
</head>

<body>
    <script>
        var ImageSize = function (src) {
            //초기값 설정
            this.image = null;

            this.imageInitialWidth = null;
            this.imageInitialHeight = null;
            this.imageWidth = null;
            this.imageHeight = null;

            this.imageSrc = src;
        }

        ImageSize.prototype.initail = function(width,height){
            document.body.style.backgroundColor = "#000";
            var imageClass = document.querySelector(".image");
            if(width >= height){
                imageClass.style.width = window.innerWidth + 'px';
            }else{
                imageClass.style.height = window.innerHeight + 'px';
            }
        }

        ImageSize.prototype.set = function () {
            var image = new Image();
            image.src = this.imageSrc;

            this.imageInitialWidth = image.width;
            this.imageInitialHeight = image.height;

            // 이미지 로딩 완료 시 실행되는 함수
            image.onload = function (){
                console.log(image.width +'/'+image.height);
                this.imageInitialWidth = image.width;
                this.imageInitialHeight = image.height;
                ImageSize.prototype.initail(this.imageInitialWidth,this.imageInitialHeight);
            }
            return image;//image 반환
        }

        ImageSize.prototype.get = function(){
            var imageClass = document.querySelector(".image");
            if(this.imageInitialWidth >= this.imageInitialHeight){
                imageClass.style.width = this.imageWidth + 'px';
            }else{
                imageClass.style.height = this.imageHeight + 'px';
            }
        }

        //이미지 사이즈 계산
        ImageSize.prototype.calculate = function(width,height){
            var screenWidth = window.innerWidth;
            var screenHeight = window.innerHeight;
            if(width >= height){
                width = screenWidth;
                this.imageWidth = width;
            }else{
                height = screenHeight;
                this.imageHeight = height;
            }
        }
        //태그 선언
        ImageSize.prototype.addElement = function (image) {
            var imageBox = document.createElement('div');
            var imageText = document.createElement('div');
            imageBox.classList.add('image_box');

            imageBox.appendChild(imageText);
            imageBox.appendChild(image);
            image.classList.add('image');

            document.body.prepend(imageBox);
        }

        var img = new ImageSize('https://via.placeholder.com/300x500');

        //로드 될 시
        window.addEventListener("load",function(){
            var imageTag = img.set();
            img.addElement(imageTag);
            img.calculate();
            img.get();
        })
        //브라우저 리사이즈 될 시
        window.addEventListener("resize", function () {
            img.set();
            img.get();
        });
    </script>
</body>

</html>